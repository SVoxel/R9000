.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "WBINFO" 1 "" "" ""
.SH "NAME"
wbinfo - Query information from winbind daemon
.SH "SYNOPSIS"
.HP 7
\fBwbinfo\fR [-a user%password] [--all-domains] [--allocate-gid] [--allocate-uid] [-D domain] [--domain domain] [-g] [--getdcname domain] [--get-auth-user] [-G gid] [-h] [-i user] [-I ip] [-K user%password] [-m] [-n name] [-N netbios-name] [--own-domain] [-p] [-r user] [-s sid] [--separator] [--sequence] [--set-auth-user user%password] [-S sid] [-t] [-u] [--user-domgroups sid] [--user-sids sid] [-U uid] [-V] [-Y sid]
.SH "DESCRIPTION"
.PP
This tool is part of the
\fBsamba\fR(7)
suite.
.PP
The
\fBwbinfo\fR
program queries and returns information created and used by the
\fBwinbindd\fR(8)
daemon.
.PP
The
\fBwinbindd\fR(8)
daemon must be configured and running for the
\fBwbinfo\fR
program to be able to return information.
.SH "OPTIONS"
.TP 3n
-a|--authenticate username%password
Attempt to authenticate a user via winbindd. This checks both authenticaion methods and reports its results.
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
\fBNote\fR
Do not be tempted to use this functionality for authentication in third-party applications. Instead use
\fBntlm_auth\fR(1).
.TP 3n
--allocate-gid
Get a new GID out of idmap
.TP 3n
--allocate-uid
Get a new UID out of idmap
.TP 3n
--all-domains
List all domains (trusted and own domain).
.TP 3n
--domain name
This parameter sets the domain on which any specified operations will performed. If special domain name '.' is used to represent the current domain to which winbindd belongs. Currently only the
\fB--sequence\fR,
\fB-u\fR, and
\fB-g\fR
options honor this parameter.
.TP 3n
-D|--domain-info domain
Show most of the info we have about the domain.
.TP 3n
-g|--domain-groups
This option will list all groups available in the Windows NT domain for which the
\fBsamba\fR(7)
daemon is operating in. Groups in all trusted domains will also be listed. Note that this operation does not assign group ids to any groups that have not already been seen by
\fBwinbindd\fR(8).
.TP 3n
--get-auth-user
Print username and password used by winbindd during session setup to a domain controller. Username and password can be set using
\fB--set-auth-user\fR. Only available for root.
.TP 3n
--getdcname domain
Get the DC name for the specified domain.
.TP 3n
-G|--gid-to-sid gid
Try to convert a UNIX group id to a Windows NT SID. If the gid specified does not refer to one within the idmap gid range then the operation will fail.
.TP 3n
-i|--user-info user
Get user info.
.TP 3n
-I|--WINS-by-ip ip
The
\fI-I\fR
option queries
\fBwinbindd\fR(8)
to send a node status request to get the NetBIOS name associated with the IP address specified by the
\fIip\fR
parameter.
.TP 3n
-K|--krb5auth username%password
Attempt to authenticate a user via Kerberos.
.TP 3n
-m|--trusted-domains
Produce a list of domains trusted by the Windows NT server
\fBwinbindd\fR(8)
contacts when resolving names. This list does not include the Windows NT domain the server is a Primary Domain Controller for.
.TP 3n
-n|--name-to-sid name
The
\fI-n\fR
option queries
\fBwinbindd\fR(8)
for the SID associated with the name specified. Domain names can be specified before the user name by using the winbind separator character. For example CWDOM1/Administrator refers to the Administrator user in the domain CWDOM1. If no domain is specified then the domain used is the one specified in the
\fBsmb.conf\fR(5)
\fIworkgroup \fR
parameter.
.TP 3n
-N|--WINS-by-name name
The
\fI-N\fR
option queries
\fBwinbindd\fR(8)
to query the WINS server for the IP address associated with the NetBIOS name specified by the
\fIname\fR
parameter.
.TP 3n
--own-domain
List own domain.
.TP 3n
-p|--ping
Check whether winbindd is still alive. Prints out either 'succeeded' or 'failed'.
.TP 3n
-r|--user-groups username
Try to obtain the list of UNIX group ids to which the user belongs. This only works for users defined on a Domain Controller.
.TP 3n
-s|--sid-to-name sid
Use
\fI-s\fR
to resolve a SID to a name. This is the inverse of the
\fI-n \fR
option above. SIDs must be specified as ASCII strings in the traditional Microsoft format. For example, S-1-5-21-1455342024-3071081365-2475485837-500.
.TP 3n
--separator
Get the active winbind separator.
.TP 3n
--sequence
Show sequence numbers of all known domains
.TP 3n
--set-auth-user username%password
Store username and password used by winbindd during session setup to a domain controller. This enables winbindd to operate in a Windows 2000 domain with Restrict Anonymous turned on (a.k.a. Permissions compatiable with Windows 2000 servers only).
.TP 3n
-S|--sid-to-uid sid
Convert a SID to a UNIX user id. If the SID does not correspond to a UNIX user mapped by
\fBwinbindd\fR(8)
then the operation will fail.
.TP 3n
-t|--check-secret
Verify that the workstation trust account created when the Samba server is added to the Windows NT domain is working.
.TP 3n
-u|--domain-users
This option will list all users available in the Windows NT domain for which the
\fBwinbindd\fR(8)
daemon is operating in. Users in all trusted domains will also be listed. Note that this operation does not assign user ids to any users that have not already been seen by
\fBwinbindd\fR(8)
.
.TP 3n
--user-domgroups SID
Get user domain groups.
.TP 3n
--user-sids SID
Get user group SIDs for user.
.TP 3n
-U|--uid-to-sid uid
Try to convert a UNIX user id to a Windows NT SID. If the uid specified does not refer to one within the idmap uid range then the operation will fail.
.TP 3n
-Y|--sid-to-gid sid
Convert a SID to a UNIX group id. If the SID does not correspond to a UNIX group mapped by
\fBwinbindd\fR(8)
then the operation will fail.
.TP 3n
-V
Prints the program version number.
.TP 3n
-h|--help
Print a summary of command line options.
.SH "EXIT STATUS"
.PP
The wbinfo program returns 0 if the operation succeeded, or 1 if the operation failed. If the
\fBwinbindd\fR(8)
daemon is not working
\fBwbinfo\fR
will always return failure.
.SH "VERSION"
.PP
This man page is correct for version 3.0 of the Samba suite.
.SH "SEE ALSO"
.PP
\fBwinbindd\fR(8)
and
\fBntlm_auth\fR(1)
.SH "AUTHOR"
.PP
The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.
.PP
\fBwbinfo\fR
and
\fBwinbindd\fR
were written by Tim Potter.
.PP
The conversion to DocBook for Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was done by Alexander Bokovoy.

