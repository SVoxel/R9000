.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "SMBMOUNT" 8 "" "" ""
.SH "NAME"
smbmount - mount an smbfs filesystem
.SH "SYNOPSIS"
.HP 9
\fBsmbmount\fR {service} {mount-point} [-o options]
.SH "DESCRIPTION"
.PP
\fBsmbmount\fR
mounts a Linux SMB filesystem. It is usually invoked as
\fBmount.smbfs\fR
by the
\fBmount\fR(8)
command when using the "-t smbfs" option. This command only works in Linux, and the kernel must support the smbfs filesystem.
.PP
Options to
\fBsmbmount\fR
are specified as a comma-separated list of key=value pairs. It is possible to send options other than those listed here, assuming that smbfs supports them. If you get mount failures, check your kernel log for errors on unknown options.
.PP
\fBsmbmount\fR
is a daemon. After mounting it keeps running until the mounted smbfs is umounted. It will log things that happen when in daemon mode using the "machine name" smbmount, so typically this output will end up in
\fIlog.smbmount\fR. The
\fB smbmount\fR
process may also be called mount.smbfs.
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
\fBNote\fR
.PP

\fBsmbmount\fR
calls
\fBsmbmnt\fR(8)
to do the actual mount. You must make sure that
\fBsmbmnt\fR
is in the path so that it can be found.
.SH "OPTIONS"
.TP 3n
username=<arg>
specifies the username to connect as. If this is not given, then the environment variable
\fB USER\fR
is used. This option can also take the form "user%password" or "user/workgroup" or "user/workgroup%password" to allow the password and workgroup to be specified as part of the username.
.TP 3n
password=<arg>
specifies the SMB password. If this option is not given then the environment variable
PASSWD
is used. If it can find no password
\fBsmbmount\fR
will prompt for a passeword, unless the guest option is given.
.sp
Note that passwords which contain the argument delimiter character (i.e. a comma ',') will failed to be parsed correctly on the command line. However, the same password defined in the PASSWD environment variable or a credentials file (see below) will be read correctly.
.TP 3n
credentials=<filename>
specifies a file that contains a username and/or password. The format of the file is:

.sp
.nf

username = <value>
password = <value>
.fi

.sp
This is preferred over having passwords in plaintext in a shared file, such as
\fI/etc/fstab\fR. Be sure to protect any credentials file properly.
.TP 3n
krb
Use kerberos (Active Directory).
.TP 3n
netbiosname=<arg>
sets the source NetBIOS name. It defaults to the local hostname.
.TP 3n
uid=<arg>
sets the uid that will own all files on the mounted filesystem. It may be specified as either a username or a numeric uid.
.TP 3n
gid=<arg>
sets the gid that will own all files on the mounted filesystem. It may be specified as either a groupname or a numeric gid.
.TP 3n
port=<arg>
sets the remote SMB port number. The default is 445, fallback is 139.
.TP 3n
fmask=<arg>
sets the file mask. This determines the permissions that remote files have in the local filesystem. This is not a umask, but the actual permissions for the files. The default is based on the current umask.
.TP 3n
dmask=<arg>
Sets the directory mask. This determines the permissions that remote directories have in the local filesystem. This is not a umask, but the actual permissions for the directories. The default is based on the current umask.
.TP 3n
debug=<arg>
Sets the debug level. This is useful for tracking down SMB connection problems. A suggested value to start with is 4. If set too high there will be a lot of output, possibly hiding the useful output.
.TP 3n
ip=<arg>
Sets the destination host or IP address.
.TP 3n
workgroup=<arg>
Sets the workgroup on the destination
.TP 3n
sockopt=<arg>
Sets the TCP socket options. See the
\fBsmb.conf\fR(5)
\fIsocket options\fR
option.
.TP 3n
scope=<arg>
Sets the NetBIOS scope
.TP 3n
guest
Don't prompt for a password
.TP 3n
ro
mount read-only
.TP 3n
rw
mount read-write
.TP 3n
iocharset=<arg>
sets the charset used by the Linux side for codepage to charset translations (NLS). Argument should be the name of a charset, like iso8859-1. (Note: only kernel 2.4.0 or later)
.TP 3n
codepage=<arg>
sets the codepage the server uses. See the iocharset option. Example value cp850. (Note: only kernel 2.4.0 or later)
.TP 3n
ttl=<arg>
sets how long a directory listing is cached in milliseconds (also affects visibility of file size and date changes). A higher value means that changes on the server take longer to be noticed but it can give better performance on large directories, especially over long distances. Default is 1000ms but something like 10000ms (10 seconds) is probably more reasonable in many cases. (Note: only kernel 2.4.2 or later)
.SH "ENVIRONMENT VARIABLES"
.PP
The variable
\fBUSER\fR
may contain the username of the person using the client. This information is used only if the protocol level is high enough to support session-level passwords. The variable can be used to set both username and password by using the format username%password.
.PP
The variable
\fBPASSWD\fR
may contain the password of the person using the client. This information is used only if the protocol level is high enough to support session-level passwords.
.PP
The variable
\fBPASSWD_FILE\fR
may contain the pathname of a file to read the password from. A single line of input is read and used as the password.
.SH "OTHER COMMANDS"
.PP
File systems that have been mounted using the
\fBsmbmount\fR
can be unmounted using the
\fBsmbumount\fR
or the UNIX system
\fBumount\fR
command.
.SH "BUGS"
.PP
Passwords and other options containing , can not be handled. For passwords an alternative way of passing them is in a credentials file or in the PASSWD environment.
.PP
The credentials file does not handle usernames or passwords with leading space.
.PP
One smbfs bug is important enough to mention here, even if it is a bit misplaced:
.TP 3n
&#8226;
Mounts sometimes stop working. This is usually caused by smbmount terminating. Since smbfs needs smbmount to reconnect when the server disconnects, the mount will eventually go dead. An umount/mount normally fixes this. At least 2 ways to trigger this bug are known.
.sp
.RE
.PP
Note that the typical response to a bug report is suggestion to try the latest version first. So please try doing that first, and always include which versions you use of relevant software when reporting bugs (minimum: samba, kernel, distribution)
.SH "SEE ALSO"
.PP
Documentation/filesystems/smbfs.txt in the linux kernel source tree may contain additional options and information.
.PP
FreeBSD also has a smbfs, but it is not related to smbmount
.PP
For Solaris, HP-UX and others you may want to look at
\fBsmbsh\fR(1)
or at other solutions, such as Sharity or perhaps replacing the SMB server with a NFS server.
.SH "AUTHOR"
.PP
Volker Lendecke, Andrew Tridgell, Michael H. Warfield and others.
.PP
The current maintainer of smbfs and the userspace tools
\fBsmbmount\fR,
\fBsmbumount\fR, and
\fBsmbmnt\fR
is
Urban Widmark. The
SAMBA Mailing list
is the preferred place to ask questions regarding these programs.
.PP
The conversion of this manpage for Samba 2.2 was performed by Gerald Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was done by Alexander Bokovoy.

